<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0B0B0D">
    <title>Yuhger6a6y Admin Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/admin/admin.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YDP7BENSY6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YDP7BENSY6');
    </script>
</head>
<body>
    <!-- Authentication Check -->
    <div id="auth-check" style="display: none;">
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0B0B0D; display: flex; align-items: center; justify-content: center; z-index: 9999;">
            <div style="text-align: center; color: white;">
                <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: #D4AF37; margin-bottom: 20px;"></i>
                <p>Verifying authentication...</p>
            </div>
        </div>
    </div>
    
    <div class="container">
        <header class="header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1>Yuhger6a6y Admin</h1>
                    <p>Professional Dashboard for Website Management</p>
                </div>
                <button id="logoutBtn" class="btn secondary" style="padding: 10px 20px; font-size: 14px;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>
        
        <div class="welcome-banner">
            <h2>Welcome Back, <span id="adminUsername">Admin</span></h2>
            <p>View website analytics, manage content, and configure settings</p>
        </div>
        
        <main class="main-content">
            <div class="dashboard-grid">
                <div class="card">
                    <h2><i class="fas fa-chart-line"></i> Website Analytics</h2>
                    <p>Monitor visitor statistics, engagement metrics, and performance insights with detailed analytics</p>
                    <button class="btn primary analytics-btn">View Analytics</button>
                </div>
            </div>
            
            <div class="stats-section">
                <h2>Platform Metrics</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Today's Visitors</h3>
                        <p class="stat-number" id="totalVisitors">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Page Views</h3>
                        <p class="stat-number" id="pageViews">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Music Plays</h3>
                        <p class="stat-number" id="musicPlays">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Gallery Views</h3>
                        <p class="stat-number" id="galleryViews">0</p>
                    </div>
                </div>
            </div>
            
            <!-- Analytics Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <h2>Traffic Overview</h2>
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>
            
            <!-- Detailed Analytics -->
            <div class="details-section">
                <div class="detail-card">
                    <h2>Recent Activity</h2>
                    <div id="recentActivity" class="activity-list">
                        <p>Loading recent activity...</p>
                    </div>
                </div>
                
                <div class="detail-card">
                    <h2>Top Referrers</h2>
                    <div id="topReferrers" class="referrer-list">
                        <p>Loading referrer data...</p>
                    </div>
                </div>
            </div>
            
            <!-- Enhanced Analytics Sections -->
            <div class="charts-section">
                <div class="chart-container">
                    <h2>Engagement Overview</h2>
                    <canvas id="engagementChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h2>Top Pages</h2>
                    <canvas id="topPagesChart"></canvas>
                </div>
            </div>
            
            <div class="charts-section">
                <div class="chart-container">
                    <h2>Device Categories</h2>
                    <canvas id="deviceChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h2>Geographic Distribution</h2>
                    <canvas id="geoChart"></canvas>
                </div>
            </div>
        </main>
        
        <footer class="footer">
            <p>&copy; 2026 Yuhger6a6y. Professional Admin Dashboard v1.0</p>
            <p>Built with Love, By SAINTKARIM</p>
        </footer>
    </div>
    
    <script src="/admin/secure-analytics.js"></script>
    <script src="/admin/admin.js"></script>
    <script>
        // Authentication check
        document.addEventListener('DOMContentLoaded', function() {
            const authCheck = document.getElementById('auth-check');
            authCheck.style.display = 'block';
            
            // Check if user is authenticated
            const isAuthenticated = localStorage.getItem('admin_authenticated');
            const sessionData = localStorage.getItem('admin_session');
            
            if (isAuthenticated !== 'true' || !sessionData) {
                // Redirect to login
                window.location.href = '/admin/login.html';
                return;
            }
            
            // Check session validity
            try {
                const session = JSON.parse(sessionData);
                const loginTime = new Date(session.loginTime);
                const now = new Date();
                const hoursPassed = (now - loginTime) / (1000 * 60 * 60);
                
                if (hoursPassed >= 24) {
                    // Session expired
                    localStorage.removeItem('admin_authenticated');
                    localStorage.removeItem('admin_session');
                    window.location.href = '/admin/login.html';
                    return;
                }
                
                // Show username
                document.getElementById('adminUsername').textContent = session.username || 'Admin';
                
            } catch (e) {
                // Invalid session
                localStorage.removeItem('admin_authenticated');
                localStorage.removeItem('admin_session');
                window.location.href = '/admin/login.html';
                return;
            }
            
            // Hide auth check
            setTimeout(() => {
                authCheck.style.display = 'none';
            }, 1000);
            
            // Add logout functionality
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.removeItem('admin_authenticated');
                    localStorage.removeItem('admin_session');
                    window.location.href = '/admin/login.html';
                }
            });
        });
    </script>
</body>
</html>